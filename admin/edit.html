<!DOCTYPE html>
<html lang="en">
<head>
  <title>Animal Park</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
  <link rel="stylesheet" href="../css/main.css">
  
</head>
<body>

<nav class="navbar navbar-inverse">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>                        
      </button>
      <a class="navbar-brand" href="#">Animal Park</a>
    </div>
    <div class="collapse navbar-collapse" id="myNavbar">
      <ul class="nav navbar-nav navbar-right">
        <li><a href="#"><span class="glyphicon glyphicon-log-in"></span> Logout</a></li>
      </ul>
    </div>
  </div>
</nav>
  
<div class="container-fluid text-center">    
  <div class="row content">
    <div class="col-sm-2 sidenav">
      <p><a href="dashboard.html">Dashboard</a></p>
      <p><a href="animal.html">Animal</a></p>
      
      
    </div>
     <div class="col-sm-10 text-left"> 
        <h3> </h3>
        <hr />
       
     <div class="panel panel-default">
        <div class="panel-heading">
            Animal Edit Page
        </div>
        <div class="panel-body">
            <div class="row details">            
               
                

                    
            </div>
            <div class="row"> 
              <div class='col-xs-2 '><div class='form-group'><button type='button' class='btn btn-success' id='update'>Update</button></div></div>
            </div>
        </div>
            
        </div>
    </div>

     </div>
 </div>
</div>

<footer class="container-fluid text-center">
  <p>Decagon&copy;2019</p>
</footer>


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
<script src="../plugins/datatables/jquery.dataTables.min.js"></script>

<script>
$(document).ready(function(){    
 var query = window.location.search.substring(1);
  console.log(query);
    $.ajax({	
                
        url:' http://localhost:3000/animals/'+ query,
        method: 'GET',
        dataType: 'json',
        success:function(data) {
            console.log(data);
                  var txt = "<div class='col-xs-6'><div class='form-group'><input type='text' class='form-control' id='name' value='"+data.name+"'></div></div>";
                    txt += "<div class='col-xs-6'><div class='form-group'><input type='text' class='form-control' id='science' value='"+data.scientificname+"'></div></div>";              
                    txt +="<div class='col-xs-12'><div class='form-group'><textarea class='form-control' id='textarea1' rows='3'>"+data.description+"</textarea></div></div>";
                    txt +="<div class='col-xs-6'><div class='form-group'><select class='form-control' id='species' value='"+data.speciess+"'><option>Mammalia</option><option>Aves</option><option>Amphibia</option><option>Reptilia</option><option>Fish</option></select></div></div>";
                    txt +="<div class='col-xs-6'><div class='form-group'><input type='text' class='form-control' id='image' value='"+data.image+"'></div></div>";
                    
                    
                  $('.details').append(txt);
                  
              
        
        }				
    });	
    
    $("#update").on('click', function(){
        
        
        var formData = {
                'name'              : $('#name').val(),
                'scientificname'    : $('#science').val(),
                'description'    : $('#textarea1').val(),
                'species'    : $('#species').val(),
                'image'    : $('#image').val(),
                
            };
        console.log(formData);    
        $.ajax({	
                
            url:' http://localhost:3000/animals/'+ query,
            type:'PATCH',
            data:formData,
            dataType: 'json',
            success:function(data) {
                    console.log(data);
                    location.reload();
                    
            }				
            }); 
          
        });
  
});

 

</script>


</body>
</html>
